<!DOCTYPE html>
<html lang="pt-BR">

<%- include('partials/head', { pageCSS: 'promocoes' }) %>

<body>
    <%- include('partials/header') %>

    <!-- Hero Section -->
    <section class="promocoes-hero">
        <div class="hero-content">
            <div class="hero-text">
                <h1>üî• Promo√ß√µes Imperd√≠veis</h1>
                <p>Descontos exclusivos e ofertas limitadas para os destinos mais incr√≠veis</p>
                <div class="hero-badge">
                    <span class="badge-text">At√© 30% OFF</span>
                    <span class="badge-subtitle">Em destinos selecionados</span>
                </div>
            </div>
            <div class="countdown-container">
                <h3>‚è∞ Oferta termina em:</h3>
                <div class="countdown" id="countdown">
                    <div class="countdown-item">
                        <span class="countdown-number" id="days">00</span>
                        <span class="countdown-label">Dias</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number" id="hours">00</span>
                        <span class="countdown-label">Horas</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number" id="minutes">00</span>
                        <span class="countdown-label">Minutos</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Promo√ß√µes Destacadas -->
    <section class="promocoes-destacadas">
        <div class="container">
            <div class="section-header">
                <h2>‚≠ê Ofertas em Destaque</h2>
                <p>As melhores promo√ß√µes com descontos especiais</p>
            </div>
            
            <div class="promocoes-grid">
                <% promocoes.destacadas.forEach(function(promo) { %>
                <div class="promo-card <%= promo.tipo %>">
                    <div class="promo-badge">
                        <span class="discount-percent">-<%= promo.desconto %>%</span>
                    </div>
                    
                    <div class="promo-header">
                        <h3 class="promo-title"><%= promo.titulo %></h3>
                        <p class="promo-destino">üìç <%= promo.destino %></p>
                    </div>

                    <div class="promo-pricing">
                        <div class="price-comparison">
                            <span class="original-price">R$ <%= promo.precoOriginal.toLocaleString('pt-BR') %></span>
                            <span class="promo-price">R$ <%= promo.precoPromocional.toLocaleString('pt-BR') %></span>
                        </div>
                        <div class="savings">
                            Economia de R$ <%= (promo.precoOriginal - promo.precoPromocional).toLocaleString('pt-BR') %>
                        </div>
                    </div>

                    <div class="promo-benefits">
                        <h4>‚ú® Incluso na promo√ß√£o:</h4>
                        <ul>
                            <% promo.beneficios.forEach(function(beneficio) { %>
                            <li>‚úì <%= beneficio %></li>
                            <% }); %>
                        </ul>
                    </div>

                    <div class="promo-availability">
                        <div class="availability-info">
                            <span class="vagas-count">üë• <%= promo.vagas %> vagas dispon√≠veis</span>
                            <span class="validade">üìÖ V√°lido at√© <%= new Date(promo.validadeFim).toLocaleDateString('pt-BR') %></span>
                        </div>
                    </div>

                    <div class="promo-conditions">
                        <small>‚ö†Ô∏è <%= promo.condicoes %></small>
                    </div>

                    <div class="promo-actions">
                        <a href="/destinos/<%= promo.slug %>" class="btn-outline">Ver Detalhes</a>
                        <a href="/destinos/<%= promo.slug %>/comprar" class="btn-primary promo-btn">
                            üî• Garantir Oferta
                        </a>
                    </div>
                </div>
                <% }); %>
            </div>
        </div>
    </section>

    <!-- Promo√ß√µes por Categoria -->
    <section class="promocoes-categorias">
        <div class="container">
            <div class="section-header">
                <h2>üéØ Promo√ß√µes por Categoria</h2>
                <p>Encontre a oferta ideal para seu perfil de viagem</p>
            </div>

            <!-- Tabs -->
            <div class="category-tabs">
                <button class="tab-btn active" data-category="nacionais">üáßüá∑ Nacionais</button>
                <button class="tab-btn" data-category="internacionais">üåç Internacionais</button>
                <button class="tab-btn" data-category="ecoturismo">üåø Ecoturismo</button>
            </div>

            <!-- Nacionais -->
            <div class="category-content active" data-category="nacionais">
                <div class="promo-list">
                    <% promocoes.categorias.nacionais.forEach(function(promo) { %>
                    <div class="promo-item">
                        <div class="item-info">
                            <h4><%= promo.titulo %></h4>
                            <p class="destination">üìç <%= promo.destino %></p>
                            <span class="validade">üìÖ At√© <%= new Date(promo.validade).toLocaleDateString('pt-BR') %></span>
                        </div>
                        <div class="item-pricing">
                            <div class="discount-badge">-<%= promo.desconto %>%</div>
                            <div class="prices">
                                <span class="original">R$ <%= promo.precoOriginal.toLocaleString('pt-BR') %></span>
                                <span class="promotional">R$ <%= promo.precoPromocional.toLocaleString('pt-BR') %></span>
                            </div>
                        </div>
                        <div class="item-actions">
                            <a href="/destinos/<%= promo.slug %>/comprar" class="btn-small">Reservar</a>
                        </div>
                    </div>
                    <% }); %>
                </div>
            </div>

            <!-- Internacionais -->
            <div class="category-content" data-category="internacionais">
                <div class="promo-list">
                    <% promocoes.categorias.internacionais.forEach(function(promo) { %>
                    <div class="promo-item">
                        <div class="item-info">
                            <h4><%= promo.titulo %></h4>
                            <p class="destination">üìç <%= promo.destino %></p>
                            <span class="validade">üìÖ At√© <%= new Date(promo.validade).toLocaleDateString('pt-BR') %></span>
                        </div>
                        <div class="item-pricing">
                            <div class="discount-badge">-<%= promo.desconto %>%</div>
                            <div class="prices">
                                <span class="original">R$ <%= promo.precoOriginal.toLocaleString('pt-BR') %></span>
                                <span class="promotional">R$ <%= promo.precoPromocional.toLocaleString('pt-BR') %></span>
                            </div>
                        </div>
                        <div class="item-actions">
                            <a href="/destinos/<%= promo.slug %>/comprar" class="btn-small">Reservar</a>
                        </div>
                    </div>
                    <% }); %>
                </div>
            </div>

            <!-- Ecoturismo -->
            <div class="category-content" data-category="ecoturismo">
                <div class="promo-list">
                    <% promocoes.categorias.ecoturismo.forEach(function(promo) { %>
                    <div class="promo-item">
                        <div class="item-info">
                            <h4><%= promo.titulo %></h4>
                            <p class="destination">üìç <%= promo.destino %></p>
                            <span class="validade">üìÖ At√© <%= new Date(promo.validade).toLocaleDateString('pt-BR') %></span>
                        </div>
                        <div class="item-pricing">
                            <div class="discount-badge">-<%= promo.desconto %>%</div>
                            <div class="prices">
                                <span class="original">R$ <%= promo.precoOriginal.toLocaleString('pt-BR') %></span>
                                <span class="promotional">R$ <%= promo.precoPromocional.toLocaleString('pt-BR') %></span>
                            </div>
                        </div>
                        <div class="item-actions">
                            <a href="/destinos/<%= promo.slug %>/comprar" class="btn-small">Reservar</a>
                        </div>
                    </div>
                    <% }); %>
                </div>
            </div>
        </div>
    </section>

    <!-- √öltima Chance -->
    <section class="ultima-chance">
        <div class="container">
            <div class="section-header urgente">
                <h2>‚ö° √öltima Chance</h2>
                <p>Ofertas com prazo limitado - N√£o perca!</p>
            </div>
            
            <div class="urgente-grid">
                <% promocoes.ultimaChance.forEach(function(promo) { %>
                <div class="urgente-card">
                    <div class="urgencia-badge">
                        <span>üö® URGENTE</span>
                    </div>
                    
                    <div class="urgente-content">
                        <h3><%= promo.titulo %></h3>
                        <p class="urgencia-text"><%= promo.urgencia %></p>
                        
                        <div class="urgente-pricing">
                            <span class="original-price">R$ <%= promo.precoOriginal.toLocaleString('pt-BR') %></span>
                            <span class="promo-price">R$ <%= promo.precoPromocional.toLocaleString('pt-BR') %></span>
                            <span class="discount">-<%= promo.desconto %>%</span>
                        </div>
                        
                        <div class="urgente-info">
                            <span class="vagas">üë• Apenas <%= promo.vagas %> vagas</span>
                            <span class="prazo">‚è∞ At√© <%= new Date(promo.validade).toLocaleDateString('pt-BR') %></span>
                        </div>
                        
                        <a href="/destinos/<%= promo.slug %>/comprar" class="btn-urgente">
                            ‚ö° Reservar Agora
                        </a>
                    </div>
                </div>
                <% }); %>
            </div>
        </div>
    </section>

    <!-- Newsletter Promo√ß√µes -->
    <section class="newsletter-promocoes">
        <div class="container">
            <div class="newsletter-content">
                <h2>üéØ N√£o Perca Nenhuma Oferta!</h2>
                <p>Cadastre-se e receba as melhores promo√ß√µes em primeira m√£o</p>
                
                <form class="newsletter-form" id="newsletter-promo-form">
                    <div class="form-group">
                        <input type="email" placeholder="Seu melhor e-mail" required>
                        <button type="submit" class="btn-newsletter">
                            üìß Quero as Ofertas
                        </button>
                    </div>
                    <div class="newsletter-benefits">
                        <span>‚úì Promo√ß√µes exclusivas</span>
                        <span>‚úì Descontos de at√© 40%</span>
                        <span>‚úì Acesso antecipado</span>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <%- include('partials/footer') %>
    <%- include('partials/scripts') %>

    <!-- Scripts espec√≠ficos das promo√ß√µes -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Countdown Timer
            function updateCountdown() {
                const now = new Date().getTime();
                const targetDate = new Date('2025-11-30 23:59:59').getTime();
                const distance = targetDate - now;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));

                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            }

            updateCountdown();
            setInterval(updateCountdown, 60000); // Atualiza a cada minuto

            // Tabs das categorias
            const tabBtns = document.querySelectorAll('.tab-btn');
            const categoryContents = document.querySelectorAll('.category-content');

            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.dataset.category;
                    
                    // Remove active class
                    tabBtns.forEach(b => b.classList.remove('active'));
                    categoryContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class
                    this.classList.add('active');
                    document.querySelector(`[data-category="${category}"].category-content`).classList.add('active');
                });
            });

            // Newsletter form
            document.getElementById('newsletter-promo-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = this.querySelector('input[type="email"]').value;
                
                alert('üéâ Cadastro realizado com sucesso! Voc√™ receber√° as melhores ofertas em ' + email);
                this.reset();
            });

            // Anima√ß√µes de entrada
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, observerOptions);

            // Observar cards de promo√ß√£o
            document.querySelectorAll('.promo-card, .promo-item, .urgente-card').forEach(card => {
                observer.observe(card);
            });
        });
    </script>
</body>
</html>