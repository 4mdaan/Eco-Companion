<%- include('../partials/head', { pageCSS: 'destino-detalhes' }) %>

<%- include('../partials/header', { currentPage: 'destinos' }) %>

<main class="destino-detalhes">
  <!-- Hero Section -->
  <section class="destino-hero <%= destino.categoria === 'Ultra Luxury' ? 'ultra-luxury-hero' : '' %>">
    <section class="hero-image" style="background-image: url('<%= destino.imagem %>');">
      <section class="hero-overlay"></section>
      <section class="hero-content">
        <% if (destino.categoria === 'Ultra Luxury') { %>
          <section class="luxury-crown">üëë</section>
        <% } %>
        <h1 class="destino-title"><%= destino.nome %></h1>
        <p class="destino-location">
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
          </svg>
          <%= destino.estado || destino.pais %>, <%= destino.regiao === 'Internacional' ? destino.pais : destino.regiao %>
        </p>
        <section class="destino-category <%= destino.categoria === 'Ultra Luxury' ? 'ultra-luxury-category' : '' %>">
          <%= destino.categoria %>
        </section>
      </section>
    </section>
  </section>

  <!-- Bot√£o Voltar -->
  <section class="container">
    <section class="back-button-container">
      <a href="/destinos" class="btn-back">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
        </svg>
        Voltar aos Destinos
      </a>
    </section>
  </section>

  <section class="container">
    <section class="destino-content-grid">
      <!-- Coluna Principal -->
      <section class="main-content">
        <!-- Descri√ß√£o -->
        <section class="destino-description">
          <h2>Sobre o Destino</h2>
          <p><%= destino.descricaoCompleta || destino.descricao %></p>
          
          <% if (destino.exclusividade) { %>
            <section class="exclusivity-info">
              <h3>‚ú® Exclusividade</h3>
              <p><%= destino.exclusividade %></p>
            </section>
          <% } %>
        </section>

        <!-- Atra√ß√µes -->
        <section class="destino-atracoes">
          <h2>üåü Principais Atra√ß√µes</h2>
          <section class="atracoes-grid">
            <% destino.atra√ß√µes.forEach(function(atracao, index) { %>
              <section class="atracao-item">
                <section class="atracao-number"><%= index + 1 %></section>
                <section class="atracao-name"><%= atracao %></section>
              </section>
            <% }); %>
          </section>
        </section>


      </section>

      <!-- Sidebar -->
      <section class="sidebar">
        <!-- Informa√ß√µes do Destino -->
        <section class="destino-info-card">
          <h3>üìã Informa√ß√µes Essenciais</h3>
          
          <section class="info-item">
            <strong>Melhor √©poca:</strong>
            <span><%= destino.melhorEpoca %></span>
          </section>
          
          <% if (destino.clima) { %>
            <section class="info-item">
              <strong>Clima:</strong>
              <span><%= destino.clima %></span>
            </section>
          <% } %>
          
          <% if (destino.temperatura) { %>
            <section class="info-item">
              <strong>Temperatura:</strong>
              <span><%= destino.temperatura %></span>
            </section>
          <% } %>
          
          <% if (destino.avaliacaoMedia) { %>
            <section class="info-item">
              <strong>Avalia√ß√£o:</strong>
              <section class="rating">
                <% for(let i = 1; i <= 5; i++) { %>
                  <span class="star <%= i <= destino.avaliacaoMedia ? 'filled' : '' %>">‚≠ê</span>
                <% } %>
                <span class="rating-number">(<%= destino.avaliacaoMedia %>)</span>
              </section>
            </section>
          <% } %>
        </section>

        <!-- Pre√ßo e Reserva -->
        <section class="booking-card <%= destino.categoria === 'Ultra Luxury' ? 'luxury-booking' : '' %>">>
          <% if (destino.preco) { %>
            <section class="price-section">
              <section class="price-label">
                <%= destino.categoria === 'Ultra Luxury' ? 'Experi√™ncia Completa' : 'A partir de' %>
              </section>
              <section class="price-main <%= destino.categoria === 'Ultra Luxury' ? 'luxury-price' : '' %>">
                R$ <%= destino.preco.toLocaleString('pt-BR') %>
              </section>
              <% if (destino.categoria === 'Ultra Luxury') { %>
                <section class="price-details">
                  <small>*Por casal, 7 dias, tudo inclu√≠do</small>
                </section>
              <% } %>
            </section>
          <% } %>
          
          <a href="/destinos/<%= destino.slug %>/comprar" class="btn-reservar <%= destino.categoria === 'Ultra Luxury' ? 'luxury-btn' : '' %>">
            <%= destino.categoria === 'Ultra Luxury' ? 'üëë Solicitar Consultoria VIP' : 'üõí Comprar' %>
          </a>
          
          <section class="booking-benefits">
            <section class="benefit-item">‚úÖ Cancelamento flex√≠vel</section>
            <section class="benefit-item">‚úÖ Pagamento parcelado</section>
            <% if (destino.categoria === 'Ultra Luxury') { %>
              <section class="benefit-item luxury-benefit">üëë Consultoria personalizada</section>
              <section class="benefit-item luxury-benefit">üíé Concierge 24/7</section>
            <% } else { %>
              <section class="benefit-item">‚úÖ Suporte 24/7</section>
            <% } %>
          </section>
        </section>

        <!-- Compartilhar -->
        <section class="share-card">
          <h4>Compartilhar</h4>
          <section class="share-buttons">
            <button class="share-btn facebook">üìò Facebook</button>
            <button class="share-btn whatsapp">üí¨ WhatsApp</button>
            <button class="share-btn copy">üìã Copiar Link</button>
          </section>
        </section>
      </section>
    </section>
  </section>
</main>

<%- include('../partials/footer') %>
<%- include('../partials/scripts') %>

<script>
// Funcionalidade de compartilhamento
document.addEventListener('DOMContentLoaded', function() {
    const shareButtons = document.querySelectorAll('.share-btn');
    
    shareButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            const type = this.classList[1];
            const url = window.location.href;
            const text = `Conhe√ßa <%= destino.nome %> - <%= destino.descricao %>`;
            
            switch(type) {
                case 'facebook':
                    window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
                    break;
                case 'whatsapp':
                    window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`, '_blank');
                    break;
                case 'copy':
                    navigator.clipboard.writeText(url).then(() => {
                        this.textContent = '‚úÖ Copiado!';
                        setTimeout(() => {
                            this.textContent = 'üìã Copiar Link';
                        }, 2000);
                    });
                    break;
            }
        });
    });
});
</script>
