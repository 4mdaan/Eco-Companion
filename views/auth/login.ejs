<%- include('../partials/head') %>

<section class="auth-container">
  <section class="auth-card">
    <!-- BotÃ£o Voltar -->
    <section class="auth-back">
      <a href="/" class="back-btn">
        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
        </svg>
        Voltar ao inÃ­cio
      </a>
    </section>

    <!-- Logo -->
    <section class="auth-header">
      <section class="auth-logo">
        <img src="/imagens/logo.png" alt="Eco Companion Logo" width="60" height="60">
        <h1>Eco Companion</h1>
      </section>
      <p class="auth-subtitle">Entre na sua conta para continuar</p>
    </section>

    <!-- Mensagens -->
    <% if (typeof error !== 'undefined' && error) { %>
      <section class="alert alert-error">
        <span class="alert-icon">âš ï¸</span>
        <%= error %>
      </section>
    <% } %>
    
    <% if (typeof success !== 'undefined' && success) { %>
      <section class="alert alert-success">
        <span class="alert-icon">âœ…</span>
        <%= success %>
      </section>
    <% } %>

    <!-- FormulÃ¡rio de Login -->
    <form method="POST" action="/auth" class="auth-form" novalidate>
      <section class="form-group">
        <label for="email">Email *</label>
        <section class="input-wrapper">
          <input 
            type="email" 
            id="email" 
            name="email" 
            value="<%= typeof email !== 'undefined' ? email : '' %>"
            placeholder="seu@email.com"
            required
            autocomplete="email"
            maxlength="254"
          >
          <section class="input-status">
            <span class="valid-icon" style="display: none;">âœ…</span>
            <span class="invalid-icon" style="display: none;">âŒ</span>
          </section>
        </section>
      </section>

      <section class="form-group">
        <label for="senha">Senha *</label>
        <section class="password-field">
          <input 
            type="password" 
            id="senha" 
            name="senha" 
            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
            required
            autocomplete="current-password"
            minlength="3"
            maxlength="128"
          >
          <button type="button" class="password-toggle" onclick="togglePassword('senha')" tabindex="-1">
            <span class="show-password">ğŸ‘ï¸</span>
            <span class="hide-password" style="display: none;">ğŸ™ˆ</span>
          </button>
          <section class="input-status">
            <span class="valid-icon" style="display: none;">âœ…</span>
            <span class="invalid-icon" style="display: none;">âŒ</span>
          </section>
        </section>
      </section>

      <section class="form-options">
        <label class="checkbox-label">
          <input type="checkbox" name="lembrar" value="1" id="lembrar">
          <span class="checkmark"></span>
          Lembrar de mim por 30 dias
        </label>
        <a href="/auth/esqueceu-senha" class="forgot-password">Esqueceu a senha?</a>
      </section>

      <!-- Indicadores de validaÃ§Ã£o -->
      <section class="validation-summary" style="display: none;">
        <section class="validation-item">
          <span class="validation-icon">âš ï¸</span>
          <span class="validation-text">Preencha todos os campos obrigatÃ³rios</span>
        </section>
      </section>

      <button type="submit" class="btn btn-primary btn-full" id="login-btn">
        <span class="btn-text">Entrar</span>
        <span class="btn-icon">â†’</span>
      </button>
      
      <!-- Contador de tentativas -->
      <section class="login-attempts" style="display: none;">
        <small class="text-muted">
          <span class="attempts-icon">ğŸ”’</span>
          Tentativas restantes: <span id="attempts-remaining">5</span>
        </small>
      </section>
    </form>

    <!-- Divisor -->
    <section class="auth-divider">
      <span>ou</span>
    </section>

    <!-- Login Social (Placeholder) -->
    <section class="social-login">
      <button type="button" class="btn btn-google">
        <span class="social-icon">ğŸ”µ</span>
        Continuar com Google
      </button>
      <button type="button" class="btn btn-facebook">
        <span class="social-icon">ğŸ“˜</span>
        Continuar com Facebook
      </button>
    </section>

    <!-- Link para Registro -->
    <section class="auth-footer">
      <p>NÃ£o tem uma conta? 
        <a href="/auth/registro" class="auth-link">Criar conta gratuita</a>
      </p>
    </section>
  </section>

  <!-- InformaÃ§Ãµes Laterais -->
  <section class="auth-info">
    <section class="info-content">
      <h2>ğŸŒŸ Bem-vindo de volta!</h2>
      <p>Acesse sua conta e continue descobrindo experiÃªncias incrÃ­veis de viagem sustentÃ¡vel.</p>
      
      <section class="features">
        <section class="feature">
          <span class="feature-icon">ğŸ’°</span>
          <section>
            <h3>Programa Cashback</h3>
            <p>Ganhe pontos em cada compra e troque por recompensas</p>
          </section>
        </section>
        
        <section class="feature">
          <span class="feature-icon">ğŸ¯</span>
          <section>
            <h3>Ofertas Personalizadas</h3>
            <p>Receba sugestÃµes baseadas no seu perfil</p>
          </section>
        </section>
        
        <section class="feature">
          <span class="feature-icon">ğŸ“±</span>
          <section>
            <h3>Acompanhe suas Viagens</h3>
            <p>Gerencie seus pacotes e histÃ³rico em um sÃ³ lugar</p>
          </section>
        </section>
      </section>
    </section>
  </section>
</section>

<%- include('../partials/scripts') %>
