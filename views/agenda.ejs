<!DOCTYPE html>
<html lang="pt-BR">

<%- include('partials/head', { pageCSS: 'agenda' }) %>

<!-- Leaflet CSS e JavaScript para Mapas -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

<body>
    <%- include('partials/header') %>

    <!-- Dashboard de Agenda Moderna -->
    <section class="agenda-dashboard">
        <div class="dashboard-container">
            <!-- Header do Dashboard -->
            <div class="dashboard-header">
                <div class="header-content">
                    <div class="title-section">
                        <h1 class="dashboard-title">
                            <span class="title-icon">üóìÔ∏è</span>
                            Agenda de Viagens
                        </h1>
                        <p class="dashboard-subtitle">Gerencie suas experi√™ncias de forma inteligente</p>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn primary" id="newTripBtn">
                            <i class="fas fa-plus"></i>
                            Nova Viagem
                        </button>
                        <div class="search-container">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" class="search-input" placeholder="Buscar destino..." id="searchInput">
                        </div>
                    </div>
                </div>

                <!-- M√©tricas R√°pidas -->
                <div class="metrics-bar">
                    <div class="metric-card">
                        <div class="metric-icon">üìà</div>
                        <div class="metric-content">
                            <span class="metric-number" id="totalTrips">6</span>
                            <span class="metric-label">Total de Viagens</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">‚úÖ</div>
                        <div class="metric-content">
                            <span class="metric-number" id="confirmedTrips">4</span>
                            <span class="metric-label">Confirmadas</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">‚è∞</div>
                        <div class="metric-content">
                            <span class="metric-number" id="pendingTrips">2</span>
                            <span class="metric-label">Pendentes</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">üí∞</div>
                        <div class="metric-content">
                            <span class="metric-number" id="totalRevenue">R$ 156k</span>
                            <span class="metric-label">Receita Total</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filtros e Visualiza√ß√£o -->
            <div class="control-panel">
                <div class="filter-section">
                    <div class="filter-group">
                        <label class="filter-label">Per√≠odo:</label>
                        <div class="date-range">
                            <input type="date" class="date-input" id="startDate">
                            <span class="date-separator">at√©</span>
                            <input type="date" class="date-input" id="endDate">
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Categoria:</label>
                        <select class="select-input" id="categoryFilter">
                            <option value="all">Todas as categorias</option>
                            <option value="praia">üèñÔ∏è Praia</option>
                            <option value="montanha">‚õ∞Ô∏è Montanha</option>
                            <option value="cidade">üèôÔ∏è Cidade</option>
                            <option value="aventura">üéØ Aventura</option>
                            <option value="relax">üßò Relaxamento</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">Status:</label>
                        <div class="status-chips">
                            <button class="status-chip active" data-status="all">Todos</button>
                            <button class="status-chip" data-status="confirmed">Confirmado</button>
                            <button class="status-chip" data-status="pending">Pendente</button>
                            <button class="status-chip" data-status="cancelled">Cancelado</button>
                        </div>
                    </div>
                </div>

                <div class="view-controls">
                    <div class="view-switcher">
                        <button class="view-btn active" data-view="cards">
                            <i class="fas fa-th-large"></i>
                            Cards
                        </button>
                        <button class="view-btn" data-view="calendar">
                            <i class="fas fa-calendar-alt"></i>
                            Calend√°rio
                        </button>
                        <button class="view-btn" data-view="timeline">
                            <i class="fas fa-stream"></i>
                            Timeline
                        </button>
                        <button class="view-btn" data-view="map">
                            <i class="fas fa-map"></i>
                            Mapa
                        </button>
                    </div>
                    
                    <div class="sort-controls">
                        <select class="sort-select" id="sortBy">
                            <option value="date">Ordenar por Data</option>
                            <option value="price">Ordenar por Pre√ßo</option>
                            <option value="destination">Ordenar por Destino</option>
                            <option value="status">Ordenar por Status</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Conte√∫do Principal -->
            <div class="main-content">
                <!-- Vista Cards (Ativa por Padr√£o) -->
                <div class="view-container active" id="cardsView">
                    <div class="trips-grid">
                        <!-- Cards ser√£o gerados dinamicamente pelo JavaScript -->
                    </div>
                </div>

                <!-- Vista Calend√°rio -->
                <div class="view-container" id="calendarView">
                    <div class="calendar-header">
                        <button class="calendar-nav-btn" id="prevMonth">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2 class="calendar-title" id="calendarTitle">Novembro 2025</h2>
                        <button class="calendar-nav-btn" id="nextMonth">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="calendar-grid">
                        <div class="calendar-weekdays">
                            <div class="weekday">Dom</div>
                            <div class="weekday">Seg</div>
                            <div class="weekday">Ter</div>
                            <div class="weekday">Qua</div>
                            <div class="weekday">Qui</div>
                            <div class="weekday">Sex</div>
                            <div class="weekday">S√°b</div>
                        </div>
                        <div class="calendar-days" id="calendarDays">
                            <!-- Dias ser√£o gerados pelo JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Vista Timeline -->
                <div class="view-container" id="timelineView">
                    <div class="timeline-container">
                        <!-- Timeline ser√° gerada pelo JavaScript -->
                    </div>
                </div>

                <!-- Vista Mapa -->
                <div class="view-container" id="mapView">
                    <div class="map-container">
                        <div class="map-controls">
                            <div class="map-legend">
                                <h4>Legenda</h4>
                                <div class="legend-item">
                                    <span class="legend-marker confirmed"></span>
                                    <span>Confirmada</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-marker pending"></span>
                                    <span>Pendente</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-marker cancelled"></span>
                                    <span>Cancelada</span>
                                </div>
                            </div>
                            <div class="map-filters">
                                <button class="map-filter-btn active" data-filter="all">Todas</button>
                                <button class="map-filter-btn" data-filter="confirmed">Confirmadas</button>
                                <button class="map-filter-btn" data-filter="pending">Pendentes</button>
                            </div>
                        </div>
                        <div id="map" class="interactive-map"></div>
                        <div class="map-info">
                            <div class="selected-trip-info" id="selectedTripInfo" style="display: none;">
                                <!-- Informa√ß√µes da viagem selecionada aparecer√£o aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal Nova Viagem -->
    <div class="modal-overlay" id="newTripModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nova Viagem</h3>
                <button class="modal-close" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form class="trip-form" id="tripForm">
                    <div class="form-group">
                        <label for="tripDestination">Destino</label>
                        <input type="text" id="tripDestination" placeholder="Ex: Fernando de Noronha" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tripStartDate">Data de In√≠cio</label>
                            <input type="date" id="tripStartDate" required>
                        </div>
                        <div class="form-group">
                            <label for="tripEndDate">Data de T√©rmino</label>
                            <input type="date" id="tripEndDate" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tripPrice">Pre√ßo (R$)</label>
                            <input type="number" id="tripPrice" placeholder="2500" required>
                        </div>
                        <div class="form-group">
                            <label for="tripCategory">Categoria</label>
                            <select id="tripCategory" required>
                                <option value="">Selecionar</option>
                                <option value="praia">üèñÔ∏è Praia</option>
                                <option value="montanha">‚õ∞Ô∏è Montanha</option>
                                <option value="cidade">üèôÔ∏è Cidade</option>
                                <option value="aventura">üéØ Aventura</option>
                                <option value="relax">üßò Relaxamento</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="tripDescription">Descri√ß√£o</label>
                        <textarea id="tripDescription" placeholder="Descreva os detalhes da viagem..." rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn secondary" id="cancelTrip">Cancelar</button>
                <button type="submit" form="tripForm" class="btn primary">Criar Viagem</button>
            </div>
        </div>
    </div>

    <!-- Modal Detalhes da Viagem -->
    <div class="modal-overlay" id="tripDetailsModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="detailsTitle">Detalhes da Viagem</h3>
                <button class="modal-close" id="closeTripDetails">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="trip-details" id="tripDetailsContent">
                    <!-- Conte√∫do ser√° preenchido pelo JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <%- include('partials/footer') %>
    <%- include('partials/scripts') %>
    <script src="/js/agenda.js"></script>
</body>
</html>