<%- include('partials/head', { pageCSS: 'sobre-contato' }) %>

<%- include('partials/header', { currentPage: 'contato' }) %>

<!-- Hero Contato -->
<div class="contato-hero">
  <div class="container">
    <div class="hero-content">
      <h1 class="hero-title">Entre em Contato</h1>
      <p class="hero-subtitle">Estamos aqui para transformar seus sonhos de viagem em realidade. Fale conosco!</p>
    </div>
  </div>
</div>

<!-- Informações de Contato -->
<section class="info-contato">
  <div class="container">
    <div class="contato-grid">
      <!-- Informações -->
      <div class="contato-info">
        <h2>📞 Fale Conosco</h2>
        <p>Nossa equipe está sempre pronta para ajudar você a planejar a viagem dos seus sonhos.</p>
        
        <div class="info-cards">
          <div class="info-card">
            <div class="info-icon">📍</div>
            <div class="info-content">
              <h4>Endereço</h4>
              <p>
                Rua das Palmeiras, 1.234<br>
                Jardim Botânico, Rio de Janeiro - RJ<br>
                CEP: 22461-000
              </p>
            </div>
          </div>
          
          <div class="info-card">
            <div class="info-icon">📞</div>
            <div class="info-content">
              <h4>Telefones</h4>
              <p>
                <strong>Central:</strong> (21) 3333-4444<br>
                <strong>WhatsApp:</strong> (21) 99999-8888<br>
                <strong>Emergência 24h:</strong> (21) 99999-7777
              </p>
            </div>
          </div>
          
          <div class="info-card">
            <div class="info-icon">📧</div>
            <div class="info-content">
              <h4>E-mails</h4>
              <p>
                <strong>Geral:</strong> contato@ecocompanion.com<br>
                <strong>Reservas:</strong> reservas@ecocompanion.com<br>
                <strong>Suporte:</strong> suporte@ecocompanion.com
              </p>
            </div>
          </div>
          
          <div class="info-card">
            <div class="info-icon">⏰</div>
            <div class="info-content">
              <h4>Horários</h4>
              <p>
                <strong>Segunda à Sexta:</strong> 8h às 18h<br>
                <strong>Sábados:</strong> 9h às 15h<br>
                <strong>Domingos:</strong> Plantão via WhatsApp
              </p>
            </div>
          </div>
        </div>
        
        <!-- Redes Sociais -->
        <div class="redes-sociais">
          <h4>🌐 Siga-nos</h4>
          <div class="social-links">
            <a href="#" class="social-link instagram">
              <span>📷</span> Instagram
            </a>
            <a href="#" class="social-link facebook">
              <span>📘</span> Facebook
            </a>
            <a href="#" class="social-link youtube">
              <span>📺</span> YouTube
            </a>
            <a href="#" class="social-link linkedin">
              <span>💼</span> LinkedIn
            </a>
          </div>
        </div>
      </div>
      
      <!-- Formulário -->
      <div class="contato-form">
        <div class="form-container">
          <h3>✉️ Envie sua Mensagem</h3>
          <p>Preencha o formulário abaixo e entraremos em contato em até 2 horas úteis.</p>
          
          <form method="POST" action="/contato" class="form-contato">
            <!-- Tipo de Solicitação -->
            <div class="form-group">
              <label for="tipo" class="form-label">Tipo de Solicitação *</label>
              <select id="tipo" name="tipo" class="form-input" required>
                <option value="">Selecione...</option>
                <option value="orcamento">💰 Solicitar Orçamento</option>
                <option value="informacao">ℹ️ Informações sobre Destinos</option>
                <option value="reserva">📅 Fazer Reserva</option>
                <option value="suporte">🛠️ Suporte Técnico</option>
                <option value="reclamacao">😟 Reclamação</option>
                <option value="elogio">😊 Elogio</option>
                <option value="parceria">🤝 Parceria Comercial</option>
                <option value="outro">📝 Outros Assuntos</option>
              </select>
            </div>
            
            <!-- Dados Pessoais -->
            <div class="form-row">
              <div class="form-group">
                <label for="nome" class="form-label">Nome Completo *</label>
                <input type="text" id="nome" name="nome" class="form-input" required>
              </div>
              
              <div class="form-group">
                <label for="email" class="form-label">E-mail *</label>
                <input type="email" id="email" name="email" class="form-input" required>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="telefone" class="form-label">Telefone *</label>
                <input type="tel" id="telefone" name="telefone" class="form-input" required>
              </div>
              
              <div class="form-group">
                <label for="cidade" class="form-label">Cidade</label>
                <input type="text" id="cidade" name="cidade" class="form-input" placeholder="Ex: São Paulo - SP">
              </div>
            </div>
            
            <!-- Preferências de Viagem -->
            <div class="form-group">
              <label for="destino-interesse" class="form-label">Destino de Interesse</label>
              <select id="destino-interesse" name="destinoInteresse" class="form-input">
                <option value="">Não tenho preferência</option>
                <option value="rio-janeiro">🏖️ Rio de Janeiro</option>
                <option value="florianopolis">🌊 Florianópolis</option>
                <option value="porto-seguro">🌴 Porto Seguro</option>
                <option value="fernando-noronha">🐢 Fernando de Noronha</option>
                <option value="campos-jordao">🏔️ Campos do Jordão</option>
                <option value="foz-iguacu">💦 Foz do Iguaçu</option>
                <option value="personalizado">✨ Destino Personalizado</option>
              </select>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="orcamento" class="form-label">Orçamento Aproximado</label>
                <select id="orcamento" name="orcamento" class="form-input">
                  <option value="">Prefiro não informar</option>
                  <option value="ate-2000">Até R$ 2.000 por pessoa</option>
                  <option value="2000-5000">R$ 2.000 - R$ 5.000 por pessoa</option>
                  <option value="5000-10000">R$ 5.000 - R$ 10.000 por pessoa</option>
                  <option value="10000-25000">R$ 10.000 - R$ 25.000 por pessoa</option>
                  <option value="acima-25000">Acima de R$ 25.000 por pessoa</option>
                  <option value="ultra-luxury">💎 Experiências Ultra Luxury</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="pessoas" class="form-label">Número de Pessoas</label>
                <input type="number" id="pessoas" name="pessoas" class="form-input" min="1" placeholder="Ex: 2">
              </div>
            </div>
            
            <!-- Mensagem -->
            <div class="form-group">
              <label for="mensagem" class="form-label">Mensagem *</label>
              <textarea id="mensagem" name="mensagem" class="form-textarea" rows="5" 
                        placeholder="Conte-nos sobre seus planos de viagem, dúvidas ou necessidades..." required></textarea>
            </div>
            
            <!-- Preferências de Contato -->
            <div class="form-group">
              <label class="form-label">Preferência de Contato</label>
              <div class="checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" name="preferenciaContato[]" value="email" checked>
                  <span class="checkbox-custom"></span>
                  📧 E-mail
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="preferenciaContato[]" value="telefone">
                  <span class="checkbox-custom"></span>
                  📞 Telefone
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="preferenciaContato[]" value="whatsapp">
                  <span class="checkbox-custom"></span>
                  💬 WhatsApp
                </label>
              </div>
            </div>
            
            <!-- Política de Privacidade -->
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" name="politica" required>
                <span class="checkbox-custom"></span>
                Concordo com a <a href="#" class="link-politica">Política de Privacidade</a> e autorizo o uso dos meus dados para contato *
              </label>
            </div>
            
            <!-- Botão de Envio -->
            <button type="submit" class="btn-enviar">
              <span class="btn-text">📨 Enviar Mensagem</span>
              <span class="btn-loader" style="display: none;">⏳ Enviando...</span>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Mapa e Localização -->
<section class="localizacao">
  <div class="container">
    <h2 class="section-title center">📍 Nossa Localização</h2>
    <p class="localizacao-intro">
      Venha nos visitar! Estamos localizados no coração do Rio de Janeiro, 
      em um ambiente aconchegante e inspirador.
    </p>
    
    <div class="mapa-container">
      <div class="mapa-placeholder">
        <div class="mapa-content">
          <h3>🗺️ Mapa Interativo</h3>
          <p>Rua das Palmeiras, 1.234<br>Jardim Botânico, Rio de Janeiro - RJ</p>
          <div class="mapa-buttons">
            <a href="https://maps.google.com/maps?q=Rio+de+Janeiro+Jardim+Botanico" target="_blank" class="btn-mapa">
              📍 Ver no Google Maps
            </a>
            <a href="https://waze.com/ul?q=Rio+de+Janeiro+Jardim+Botanico" target="_blank" class="btn-mapa">
              🚗 Abrir no Waze
            </a>
          </div>
        </div>
      </div>
      
      <div class="transporte-info">
        <h4>🚌 Como Chegar</h4>
        <div class="transporte-opcoes">
          <div class="transporte-item">
            <strong>🚇 Metrô:</strong> Estação Jardim Botânico (Linha 1) - 5 min caminhando
          </div>
          <div class="transporte-item">
            <strong>🚌 Ônibus:</strong> Linhas 583, 584, 591 - Ponto em frente
          </div>
          <div class="transporte-item">
            <strong>🚕 Taxi/Uber:</strong> Ponto de referência: Jardim Botânico
          </div>
          <div class="transporte-item">
            <strong>🚗 Carro:</strong> Estacionamento gratuito para clientes
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- FAQ Rápido -->
<section class="faq-contato">
  <div class="container">
    <h2 class="section-title center">❓ Perguntas Frequentes</h2>
    
    <div class="faq-grid">
      <div class="faq-item">
        <h4>⏰ Quanto tempo para resposta?</h4>
        <p>Respondemos todas as mensagens em até 2 horas úteis. Para urgências, use nosso WhatsApp!</p>
      </div>
      
      <div class="faq-item">
        <h4>💳 Formas de pagamento?</h4>
        <p>Cartão de crédito (até 12x), PIX com desconto, boleto bancário e financiamento próprio.</p>
      </div>
      
      <div class="faq-item">
        <h4>📋 Preciso de documentos?</h4>
        <p>Para orçamentos, apenas dados básicos. Para reservas, RG, CPF e passaporte se internacional.</p>
      </div>
      
      <div class="faq-item">
        <h4>🔄 Posso cancelar/alterar?</h4>
        <p>Sim! Temos política flexível de cancelamento e alterações conforme condições de cada pacote.</p>
      </div>
    </div>
  </div>
</section>

<!-- CTA Urgente -->
<section class="cta-urgente">
  <div class="container">
    <div class="urgente-content">
      <div class="urgente-icon">🚨</div>
      <div class="urgente-text">
        <h3>Precisa Falar Urgente?</h3>
        <p>Para emergências durante viagens ou questões urgentes, entre em contato:</p>
      </div>
      <div class="urgente-contatos">
        <a href="tel:+5521999997777" class="btn-urgente telefone">
          📞 (21) 99999-7777
        </a>
        <a href="https://wa.me/5521999998888" target="_blank" class="btn-urgente whatsapp">
          💬 WhatsApp 24h
        </a>
      </div>
    </div>
  </div>
</section>

<%- include('partials/footer') %>
<%- include('partials/scripts') %>

<script>
// Máscaras para os campos
document.getElementById('telefone').addEventListener('input', function(e) {
  let value = e.target.value.replace(/\D/g, '');
  value = value.replace(/(\d{2})(\d)/, '($1) $2');
  value = value.replace(/(\d{5})(\d)/, '$1-$2');
  e.target.value = value;
});

// Validação do formulário
document.querySelector('.form-contato').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const btnEnviar = document.querySelector('.btn-enviar');
  const btnText = document.querySelector('.btn-text');
  const btnLoader = document.querySelector('.btn-loader');
  
  // Mostrar loading
  btnText.style.display = 'none';
  btnLoader.style.display = 'inline';
  btnEnviar.disabled = true;
  
  // Coletar dados do formulário
  const formData = new FormData(this);
  
  // Enviar via fetch
  fetch('/contato', {
    method: 'POST',
    body: formData
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      // Redirecionar para página de sucesso
      window.location.href = `/contato/sucesso/${data.protocolo}`;
    } else {
      // Mostrar erro
      alert('Erro: ' + data.message);
      
      // Resetar botão
      btnText.style.display = 'inline';
      btnLoader.style.display = 'none';
      btnEnviar.disabled = false;
    }
  })
  .catch(error => {
    console.error('Erro ao enviar formulário:', error);
    alert('Erro ao enviar mensagem. Tente novamente.');
    
    // Resetar botão
    btnText.style.display = 'inline';
    btnLoader.style.display = 'none';
    btnEnviar.disabled = false;
  });
});

// Animações de entrada
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.style.opacity = '1';
      entry.target.style.transform = 'translateY(0)';
    }
  });
}, observerOptions);

// Aplicar animações
document.querySelectorAll('.info-card, .faq-item').forEach(el => {
  el.style.opacity = '0';
  el.style.transform = 'translateY(20px)';
  el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
  observer.observe(el);
});

// Atualizar formulário baseado no tipo selecionado
document.getElementById('tipo').addEventListener('change', function() {
  const tipo = this.value;
  const orcamentoGroup = document.getElementById('orcamento').closest('.form-group');
  const destinoGroup = document.getElementById('destino-interesse').closest('.form-group');
  const pessoasGroup = document.getElementById('pessoas').closest('.form-group');
  
  if (tipo === 'orcamento' || tipo === 'reserva') {
    orcamentoGroup.style.display = 'block';
    destinoGroup.style.display = 'block';
    pessoasGroup.style.display = 'block';
  } else {
    orcamentoGroup.style.display = 'none';
    destinoGroup.style.display = 'none';
    pessoasGroup.style.display = 'none';
  }
});
</script>